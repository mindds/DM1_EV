# merge lanes 
bash merge.lanes.sh -f /space/mindds/1/projects/ThurmanRNASeq/data/20211129_Wheeler_Muscle_stem_cell_transcriptome -o ../data/merged/20211129_Wheeler_Muscle_stem_cell_transcriptome &> 20211129_Wheeler_Muscle_stem_cell_transcriptome/logs/merge_lanes.log

# generate sample_table.csv for the pipline
Rscript make_sampleTable.R -f /space/mindds/1/projects/ThurmanRNASeq/data/merged/20211129_Wheeler_Muscle_stem_cell_transcriptome


# run pipeline
conda activate snakemake
BASE=/space/mindds/1/pipelines/rnaseq-pipeline
PATH_OUT=/space/mindds/1/projects/ThurmanRNASeq/results/20211129_Wheeler_Muscle_stem_cell_transcriptome/salmon_new
snakemake -s $BASE/snakemake_pipeline.py \
--cores 4 \
--directory=$PATH_OUT \
--configfile="/space/mindds/1/projects/ThurmanRNASeq/scripts/20211129_Wheeler_Muscle_stem_cell_transcriptome/config_human.yaml" &> /space/mindds/1/projects/ThurmanRNASeq/scripts/20211129_Wheeler_Muscle_stem_cell_transcriptome/logs/pipline_m23_0420_continue.log


# create IGV annotation file
cd /space/mindds/1/pipelines/rnaseq-pipeline/annotation/Mouse/M23
cat annotation.gtf | grep -E 'gene_name "Fn1"|gene_name "App"|gene_name "Stan1"|gene_name "Dlst"' | awk '$3=="exon"' |  awk '{printf"%s exon_number \"%d\";\n", $0, NR}' &> /space/mindds/1/projects/ThurmanRNASeq/results/20211129_Wheeler_Muscle_stem_cell_transcriptome/STAR/mouse/trimmedbam/M23_IGV_annotation.gtf